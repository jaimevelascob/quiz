{"remainingRequest":"/home/hab35/Hackabos/proyectoHack/front/node_modules/babel-loader/lib/index.js!/home/hab35/Hackabos/proyectoHack/front/src/api/utils.js","dependencies":[{"path":"/home/hab35/Hackabos/proyectoHack/front/src/api/utils.js","mtime":1592736935999},{"path":"/home/hab35/Hackabos/proyectoHack/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hab35/Hackabos/proyectoHack/front/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2hhYjM1L0hhY2thYm9zL3Byb3llY3RvSGFjay9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBqd3QgZnJvbSAiand0LWRlY29kZSI7CnZhciBFTkRQT0lOVCA9ICJodHRwOi8vbG9jYWxob3N0OjMwMDAiOwp2YXIgQVVUSF9UT0tFTl9LRVkgPSAiYXV0aFRva2VuIjsKdmFyIFJPTEUgPSAicm9sZSI7IC8vRlVOQ0lPTiBMT0dJTgoKZXhwb3J0IGZ1bmN0aW9uIGxvZ2luVXNlcihlbWFpbCwgcGFzc3dvcmQpIHsKICByZXR1cm4gbmV3IFByb21pc2UoIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIHJlczsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBheGlvcyh7CiAgICAgICAgICAgICAgICB1cmw6ICIiLmNvbmNhdChFTkRQT0lOVCwgIi91c2Vycy9sb2dpbiIpLAogICAgICAgICAgICAgICAgLy9VUkwgREUgTEEgQVVURU5USUNBQ0nDk04KICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgLy9Nw4lUT0RPIERFIExBIEFVVEVOVElGSUNBQ0nDk04KICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsLAogICAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgICAgICAgICAgIH0gLy8gREFUT1MgREUgTEEgQVVURU5USUZJQ0FDScOTTgoKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIHNldEF1dGhUb2tlbihyZXMuZGF0YS5kYXRhLnRva2VuKTsKICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA4OwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CgogICAgICAgICAgICAgIGlmIChfY29udGV4dC50MC5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgYWxlcnQoX2NvbnRleHQudDAucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRXJyb3IgZW4gbG9naW46ICIsIF9jb250ZXh0LnQwKTsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgOF1dKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIpIHsKICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpKTsKfSAvL0xPR09VVAoKZXhwb3J0IGZ1bmN0aW9uIGNsZWFyTG9naW4oKSB7CiAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bIkF1dGhvcml6YXRpb24iXSA9ICIiOwogIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKEFVVEhfVE9LRU5fS0VZKTsKICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiVXN1YXJpbyIpOwogIGNsZWFyQWRtaW4oKTsKfSAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09IFRPS0VOID09PT09PT09PT09PT09PT09PT09PQovL0dVQVJEQVIgVE9LRU4gRU4gTE9DQUxTVE9SQUdFCgpleHBvcnQgZnVuY3Rpb24gc2V0QXV0aFRva2VuKHRva2VuKSB7CiAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bIkF1dGhvcml6YXRpb24iXSA9ICJCZWFyZXIgIi5jb25jYXQodG9rZW4pOwogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKEFVVEhfVE9LRU5fS0VZLCB0b2tlbik7Cn0gLy9DT0dFUiBFTCBUT0tFTgoKZXhwb3J0IGZ1bmN0aW9uIGdldEF1dGhUb2tlbigpIHsKICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oQVVUSF9UT0tFTl9LRVkpOwp9IC8vQ09OU0lHVUlFTkRPIEZFQ0hBIERFIENBRFVDSURBRCBERUwgVE9LRU4KCmV4cG9ydCBmdW5jdGlvbiBnZXRUb2tlbkV4cGlyYXRpb25EYXRlKGVuY29kZWRUb2tlbikgewogIHZhciB0b2tlbiA9IGp3dChlbmNvZGVkVG9rZW4pOyAvL3NpIG5vIGhheSwgbm8gc2lndWUKCiAgaWYgKCF0b2tlbi5leHApIHsKICAgIHJldHVybiBudWxsOwogIH0KCiAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgwKTsKICBkYXRlLnNldFVUQ1NlY29uZHModG9rZW4uZXhwKTsKICByZXR1cm4gZGF0ZTsKfSAvL0NPTVBST0JBTkRPIFNJIExBIEZFQ0hBIFNJR1VFIFZJR0VOVEUgTyBOTwoKZXhwb3J0IGZ1bmN0aW9uIGlzVG9rZW5FeHBpcmVkKHRva2VuKSB7CiAgdmFyIGV4cGlyYXRpb25EYXRlID0gZ2V0VG9rZW5FeHBpcmF0aW9uRGF0ZSh0b2tlbik7CiAgcmV0dXJuIGV4cGlyYXRpb25EYXRlIDwgbmV3IERhdGUoKTsKfSAvL0NPTVBST0JBUiBTSSBFTCBVU0VSIEVTVMOBIExPR0VBRE8gTyBOTwoKZXhwb3J0IGZ1bmN0aW9uIGlzTG9nZ2VkSW4oKSB7CiAgdmFyIGF1dGhUb2tlbiA9IGdldEF1dGhUb2tlbigpOwogIHJldHVybiAhIWF1dGhUb2tlbiAmJiAhaXNUb2tlbkV4cGlyZWQoYXV0aFRva2VuKTsKfSAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09IFJPTCBVU1VBUklPID09PT09PT09PT09PT09PT09PT09PQovL0dVQVJEQVIgU0kgRVMgQURNSU4gRU4gTE9DQUwgU1RPUkFHRQoKZXhwb3J0IGZ1bmN0aW9uIHNldElzQWRtaW4oaXNBZG1pbikgewogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFJPTEUsIGlzQWRtaW4pOwp9IC8vQk9SUkFSIFJPTCBERUwgVVNFUiBFTiBMT0NBTCBTVE9SQUdFCgpleHBvcnQgZnVuY3Rpb24gY2xlYXJBZG1pbigpIHsKICByZXR1cm4gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oUk9MRSk7Cn0gLy8gUkVDVVBFUkFSIFJPTCBERVNERSBMT0NBTCBTVE9SQUdFCgpleHBvcnQgZnVuY3Rpb24gZ2V0SXNBZG1pbigpIHsKICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oUk9MRSk7Cn0gLy9DT01QUk9CQVIgUk9MCgpleHBvcnQgZnVuY3Rpb24gY2hlY2tBZG1pbigpIHsKICB2YXIgcm9sZSA9IGZhbHNlOwogIHZhciBpc0FkbWluID0gZ2V0SXNBZG1pbigpOwoKICBpZiAoaXNBZG1pbiA9PT0gInRydWUiKSB7CiAgICByb2xlID0gdHJ1ZTsKICB9IGVsc2UgewogICAgcm9sZSA9IGZhbHNlOwogIH0KCiAgcmV0dXJuIHJvbGU7Cn0="},{"version":3,"sources":["/home/hab35/Hackabos/proyectoHack/front/src/api/utils.js"],"names":["axios","jwt","ENDPOINT","AUTH_TOKEN_KEY","ROLE","loginUser","email","password","Promise","resolve","reject","url","method","data","res","setAuthToken","token","response","alert","console","log","clearLogin","defaults","headers","common","localStorage","removeItem","clearAdmin","setItem","getAuthToken","getItem","getTokenExpirationDate","encodedToken","exp","date","Date","setUTCSeconds","isTokenExpired","expirationDate","isLoggedIn","authToken","setIsAdmin","isAdmin","getIsAdmin","checkAdmin","role"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport jwt from \"jwt-decode\";\n\nconst ENDPOINT = \"http://localhost:3000\";\nconst AUTH_TOKEN_KEY = \"authToken\";\nconst ROLE = \"role\";\n\n//FUNCION LOGIN\nexport function loginUser(email, password) {\n  return new Promise(async (resolve, reject) => {\n    try {\n      let res = await axios({\n        url: `${ENDPOINT}/users/login`, //URL DE LA AUTENTICACIÓN\n        method: \"POST\", //MÉTODO DE LA AUTENTIFICACIÓN\n        data: {\n          email: email,\n          password: password,\n        }, // DATOS DE LA AUTENTIFICACIÓN\n      });\n      setAuthToken(res.data.data.token);\n      resolve();\n    } catch (err) {\n      if (err.response) {\n        alert(err.response.data);\n      }\n\n      console.log(\"Error en login: \", err);\n    }\n  });\n}\n\n//LOGOUT\nexport function clearLogin() {\n  axios.defaults.headers.common[\"Authorization\"] = \"\";\n  localStorage.removeItem(AUTH_TOKEN_KEY);\n  localStorage.removeItem(\"Usuario\");\n  clearAdmin();\n}\n\n// ========================= TOKEN =====================\n\n//GUARDAR TOKEN EN LOCALSTORAGE\nexport function setAuthToken(token) {\n  axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n  localStorage.setItem(AUTH_TOKEN_KEY, token);\n}\n\n//COGER EL TOKEN\nexport function getAuthToken() {\n  return localStorage.getItem(AUTH_TOKEN_KEY);\n}\n\n//CONSIGUIENDO FECHA DE CADUCIDAD DEL TOKEN\nexport function getTokenExpirationDate(encodedToken) {\n  let token = jwt(encodedToken);\n  //si no hay, no sigue\n  if (!token.exp) {\n    return null;\n  }\n  let date = new Date(0);\n  date.setUTCSeconds(token.exp);\n  return date;\n}\n\n//COMPROBANDO SI LA FECHA SIGUE VIGENTE O NO\nexport function isTokenExpired(token) {\n  let expirationDate = getTokenExpirationDate(token);\n  return expirationDate < new Date();\n}\n\n//COMPROBAR SI EL USER ESTÁ LOGEADO O NO\nexport function isLoggedIn() {\n  let authToken = getAuthToken();\n  return !!authToken && !isTokenExpired(authToken);\n}\n\n// ========================= ROL USUARIO =====================\n\n//GUARDAR SI ES ADMIN EN LOCAL STORAGE\nexport function setIsAdmin(isAdmin) {\n  localStorage.setItem(ROLE, isAdmin);\n}\n\n//BORRAR ROL DEL USER EN LOCAL STORAGE\nexport function clearAdmin() {\n  return localStorage.removeItem(ROLE);\n}\n\n// RECUPERAR ROL DESDE LOCAL STORAGE\nexport function getIsAdmin() {\n  return localStorage.getItem(ROLE);\n}\n\n//COMPROBAR ROL\nexport function checkAdmin() {\n  let role = false;\n  let isAdmin = getIsAdmin();\n  if (isAdmin === \"true\") {\n    role = true;\n  } else {\n    role = false;\n  }\n  return role;\n}\n"]}]}